(function(){var e=CodeMirror.Pos;namespace="emacs_";var d={};function f(i){var k=d[h];if(k){return k}var l,g,m;var h=i.replace(/\w+-/g,function(o){if(o=="Ctrl-"){l=true}else{if(o=="Alt-"){m=true}else{if(o=="Shift-"){g=true}}}return""});var j;for(var n in CodeMirror.keyNames){if(CodeMirror.keyNames[n]==h){j=n;break}}if(n==null){throw new Error("Unknown key: "+h)}return d[i]={type:"keydown",keyCode:j,ctrlKey:l,shiftKey:g,altKey:m,preventDefault:function(){},stopPropagation:function(){}}}function c(g,i){var h=Array.prototype.slice.call(arguments,2);testCM(g,function(j){for(var k=0;k<h.length;++k){var l=h[k];if(l instanceof e){j.setCursor(l)}else{if(l.call){l(j)}else{j.triggerOnKeyDown(f(l))}}}},{keyMap:"emacs",value:i,mode:"javascript"})}function b(g,h){return function(i){eqPos(i.getCursor(),e(g,h))}}function a(g){return function(h){eq(h.getValue(),g)}}c("motionHSimple","abc","Ctrl-F","Ctrl-F","Ctrl-B",b(0,1));c("motionHMulti","abcde","Ctrl-4","Ctrl-F",b(0,4),"Ctrl--","Ctrl-2","Ctrl-F",b(0,2),"Ctrl-5","Ctrl-B",b(0,0));c("motionHWord","abc. def ghi","Alt-F",b(0,3),"Alt-F",b(0,8),"Ctrl-B","Alt-B",b(0,5),"Alt-B",b(0,0));c("motionHWordMulti","abc. def ghi ","Ctrl-3","Alt-F",b(0,12),"Ctrl-2","Alt-B",b(0,5),"Ctrl--","Alt-B",b(0,8));c("motionVSimple","a\nb\nc\n","Ctrl-N","Ctrl-N","Ctrl-P",b(1,0));c("motionVMulti","a\nb\nc\nd\ne\n","Ctrl-2","Ctrl-N",b(2,0),"Ctrl-F","Ctrl--","Ctrl-N",b(1,1),"Ctrl--","Ctrl-3","Ctrl-P",b(4,1));c("killYank","abc\ndef\nghi","Ctrl-F","Ctrl-Space","Ctrl-N","Ctrl-N","Ctrl-W","Ctrl-E","Ctrl-Y",a("ahibc\ndef\ng"));c("killRing","abcdef","Ctrl-Space","Ctrl-F","Ctrl-W","Ctrl-Space","Ctrl-F","Ctrl-W","Ctrl-Y","Alt-Y",a("acdef"));c("copyYank","abcd","Ctrl-Space","Ctrl-E","Alt-W","Ctrl-Y",a("abcdabcd"));c("killLineSimple","foo\nbar","Ctrl-F","Ctrl-K",a("f\nbar"));c("killLineEmptyLine","foo\n  \nbar","Ctrl-N","Ctrl-K",a("foo\nbar"));c("killLineMulti","foo\nbar\nbaz","Ctrl-F","Ctrl-F","Ctrl-K","Ctrl-K","Ctrl-K","Ctrl-A","Ctrl-Y",a("o\nbarfo\nbaz"));c("moveByParagraph","abc\ndef\n\n\nhij\nklm\n\n","Ctrl-F","Ctrl-Down",b(2,0),"Ctrl-Down",b(6,0),"Ctrl-N","Ctrl-Up",b(3,0),"Ctrl-Up",b(0,0),e(1,2),"Ctrl-Down",b(2,0),e(4,2),"Ctrl-Up",b(3,0));c("moveByParagraphMulti","abc\n\ndef\n\nhij\n\nklm","Ctrl-U","2","Ctrl-Down",b(3,0),"Shift-Alt-.","Ctrl-3","Ctrl-Up",b(1,0));c("moveBySentence","sentence one! sentence\ntwo\n\nparagraph two","Alt-E",b(0,13),"Alt-E",b(1,3),"Ctrl-F","Alt-A",b(0,13));c("moveByExpr","function foo(a, b) {}","Ctrl-Alt-F",b(0,8),"Ctrl-Alt-F",b(0,12),"Ctrl-Alt-F",b(0,18),"Ctrl-Alt-B",b(0,12),"Ctrl-Alt-B",b(0,9));c("moveByExprMulti","foo bar baz bug","Ctrl-2","Ctrl-Alt-F",b(0,7),"Ctrl--","Ctrl-Alt-F",b(0,4),"Ctrl--","Ctrl-2","Ctrl-Alt-B",b(0,11));c("delExpr","var x = [\n  a,\n  b\n  c\n];",e(0,8),"Ctrl-Alt-K",a("var x = ;"),"Ctrl-/",e(4,1),"Ctrl-Alt-Backspace",a("var x = ;"));c("delExprMulti","foo bar baz","Ctrl-2","Ctrl-Alt-K",a(" baz"),"Ctrl-/","Ctrl-E","Ctrl-2","Ctrl-Alt-Backspace",a("foo "));c("justOneSpace","hi      bye  ",e(0,4),"Alt-Space",a("hi bye  "),e(0,4),"Alt-Space",a("hi b ye  "),"Ctrl-A","Alt-Space","Ctrl-E","Alt-Space",a(" hi b ye "));c("openLine","foo bar","Alt-F","Ctrl-O",a("foo\n bar"));c("transposeChar","abcd\ne","Ctrl-F","Ctrl-T","Ctrl-T",a("bcad\ne"),b(0,3),"Ctrl-F","Ctrl-T","Ctrl-T","Ctrl-T",a("bcda\ne"),b(0,4),"Ctrl-F","Ctrl-T",a("bcde\na"),b(1,0));c("manipWordCase","foo BAR bAZ","Alt-C","Alt-L","Alt-U",a("Foo bar BAZ"),"Ctrl-A","Alt-U","Alt-L","Alt-C",a("FOO bar Baz"));c("manipWordCaseMulti","foo Bar bAz","Ctrl-2","Alt-U",a("FOO BAR bAz"),"Ctrl-A","Ctrl-3","Alt-C",a("Foo Bar Baz"));c("upExpr","foo {\n  bar[];\n  baz(blah);\n}",e(2,7),"Ctrl-Alt-U",b(2,5),"Ctrl-Alt-U",b(0,4));c("transposeExpr","do foo[bar] dah",e(0,6),"Ctrl-Alt-T",a("do [bar]foo dah"));c("clearMark","abcde",e(0,2),"Ctrl-Space","Ctrl-F","Ctrl-F","Ctrl-G","Ctrl-W",a("abcde"));c("delRegion","abcde","Ctrl-Space","Ctrl-F","Ctrl-F","Delete",a("cde"));c("backspaceRegion","abcde","Ctrl-Space","Ctrl-F","Ctrl-F","Backspace",a("cde"));testCM("save",function(g){var h=false;CodeMirror.commands.save=function(i){h=i.getValue()};g.triggerOnKeyDown(f("Ctrl-X"));g.triggerOnKeyDown(f("Ctrl-S"));is(h,"hi")},{value:"hi",keyMap:"emacs"});testCM("gotoInvalidLineFloat",function(g){g.openDialog=function(i,h){h("2.2")};g.triggerOnKeyDown(f("Alt-G"));g.triggerOnKeyDown(f("G"))},{value:"1\n2\n3\n4",keyMap:"emacs"})})();