// jQuery postMessage Transport Plugin 1.1.1
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(window.jQuery)}}(function(b){var a=0,d=["accepts","cache","contents","contentType","crossDomain","data","dataType","headers","ifModified","mimeType","password","processData","timeout","traditional","type","url","username"],c=function(e){return e};b.ajaxSetup({converters:{"postmessage text":c,"postmessage json":c,"postmessage html":c}});b.ajaxTransport("postmessage",function(e){if(e.postMessage&&window.postMessage){var g,i=b("<a>").prop("href",e.postMessage)[0],h=i.protocol+"//"+i.host,f=e.xhr().upload;return{send:function(k,m){a+=1;var l={id:"postmessage-transport-"+a},j="message."+l.id;g=b('<iframe style="display:none;" src="'+e.postMessage+'" name="'+l.id+'"></iframe>').bind("load",function(){b.each(d,function(o,n){l[n]=e[n]});l.dataType=l.dataType.replace("postmessage ","");b(window).bind(j,function(p){p=p.originalEvent;var o=p.data,n;if(p.origin===h&&o.id===l.id){if(o.type==="progress"){n=document.createEvent("Event");n.initEvent(o.type,false,true);b.extend(n,o);f.dispatchEvent(n)}else{m(o.status,o.statusText,{postmessage:o.result},o.headers);g.remove();b(window).unbind(j)}}});g[0].contentWindow.postMessage(l,h)}).appendTo(document.body)},abort:function(){if(g){g.remove()}}}}})}));