// plugin.js
(function(a){a.on("AddEditor",function(b){b.editor.settings.inline_styles=false});a.PluginManager.add("legacyoutput",function(c,b,d){c.on("init",function(){var e="p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",g=a.explode(c.settings.font_size_style_values),f=c.schema;c.formatter.register({alignleft:{selector:e,attributes:{align:"left"}},aligncenter:{selector:e,attributes:{align:"center"}},alignright:{selector:e,attributes:{align:"right"}},alignjustify:{selector:e,attributes:{align:"justify"}},bold:[{inline:"b",remove:"all"},{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}}],italic:[{inline:"i",remove:"all"},{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}}],underline:[{inline:"u",remove:"all"},{inline:"span",styles:{textDecoration:"underline"},exact:true}],strikethrough:[{inline:"strike",remove:"all"},{inline:"span",styles:{textDecoration:"line-through"},exact:true}],fontname:{inline:"font",attributes:{face:"%value"}},fontsize:{inline:"font",attributes:{size:function(h){return a.inArray(g,h.value)+1}}},forecolor:{inline:"font",attributes:{color:"%value"}},hilitecolor:{inline:"font",styles:{backgroundColor:"%value"}}});a.each("b,i,u,strike".split(","),function(h){f.addValidElements(h+"[*]")});if(!f.getElementRule("font")){f.addValidElements("font[face|size|color|style]")}a.each(e.split(","),function(h){var i=f.getElementRule(h);if(i){if(!i.attributes.align){i.attributes.align={};i.attributesOrder.push("align")}}})});c.addButton("fontsizeselect",function(){var e=[],g="8pt=1 10pt=2 12pt=3 14pt=4 18pt=5 24pt=6 36pt=7";var f=c.settings.fontsize_formats||g;c.$.each(f.split(" "),function(j,k){var m=k,l=k;var h=k.split("=");if(h.length>1){m=h[0];l=h[1]}e.push({text:m,value:l})});return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:e,fixedWidth:true,onPostRender:function(){var h=this;c.on("NodeChange",function(){var i;i=c.dom.getParent(c.selection.getNode(),"font");if(i){h.value(i.size)}else{h.value("")}})},onclick:function(h){if(h.control.settings.value){c.execCommand("FontSize",false,h.control.settings.value)}}}});c.addButton("fontselect",function(){function e(j){j=j.replace(/;$/,"").split(";");var k=j.length;while(k--){j[k]=j[k].split("=")}return j}var g="Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats";var f=[],h=e(c.settings.font_formats||g);d.each(h,function(k,j){f.push({text:{raw:j[0]},value:j[1],textStyle:j[1].indexOf("dings")==-1?"font-family:"+j[1]:""})});return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:f,fixedWidth:true,onPostRender:function(){var i=this;c.on("NodeChange",function(){var j;j=c.dom.getParent(c.selection.getNode(),"font");if(j){i.value(j.face)}else{i.value("")}})},onselect:function(i){if(i.control.settings.value){c.execCommand("FontName",false,i.control.settings.value)}}}})})})(tinymce);