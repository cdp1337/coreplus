// plugin.js
tinymce.PluginManager.add("save",function(b){function d(){var e;e=tinymce.DOM.getParent(b.id,"form");if(b.getParam("save_enablewhendirty",true)&&!b.isDirty()){return}tinymce.triggerSave();if(b.getParam("save_onsavecallback")){if(b.execCallback("save_onsavecallback",b)){b.startContent=tinymce.trim(b.getContent({format:"raw"}));b.nodeChanged()}return}if(e){b.isNotDirty=true;if(!e.onsubmit||e.onsubmit()){if(typeof e.submit=="function"){e.submit()}else{b.windowManager.alert("Error: Form submit field collision.")}}b.nodeChanged()}else{b.windowManager.alert("Error: No form element found.")}}function c(){var e=tinymce.trim(b.startContent);if(b.getParam("save_oncancelcallback")){b.execCallback("save_oncancelcallback",b);return}b.setContent(e);b.undoManager.clear();b.nodeChanged()}function a(){var e=this;b.on("nodeChange",function(){e.disabled(b.getParam("save_enablewhendirty",true)&&!b.isDirty())})}b.addCommand("mceSave",d);b.addCommand("mceCancel",c);b.addButton("save",{icon:"save",text:"Save",cmd:"mceSave",disabled:true,onPostRender:a});b.addButton("cancel",{text:"Cancel",icon:false,cmd:"mceCancel",disabled:true,onPostRender:a});b.addShortcut("Meta+S","","mceSave")});