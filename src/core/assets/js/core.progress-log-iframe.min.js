(function(b,a){b.ProgressLogIframe=function(d,g){var e=null,f=a("#"+d+"-container"),c=f.find(".progress-log-view-details"),h=f.find(".progress-log-iframe");c.click(function(){var i=a(this);if(h.is(":visible")){h.hide();i.html("View Details")}else{h.show();i.html("Hide Details")}return false});a("#"+g).submit(function(){var m="",o=f.find(".progress-log-title"),l=f.find(".progress-log-progressbar-inner"),k=f.find(".progress-log-message"),p=f.find(".progress-log-warnings"),j=[],n=h[0],i;i=function(){var s=n.contentDocument||n.contentWindow.document,q=(s.body?s.body.innerHTML:""),y="",v,w,u,z,r,x;if(q===m){return}y=q.substr(m.length);m=q;if(y.indexOf("<!--CLI-DATA:")!==-1){v=y.match(/<!--CLI-DATA:(.*?)-->/gm);for(w in v){u=v[w].substring(13,v[w].length-3);if(u.indexOf("PROGRESSBAR=")===0){l.css("width",u.substr(12)+"%")}else{if(u.indexOf("HEADER=")===0){r=u.substr(7);o.html(r)}else{if(u.indexOf("LINE=")===0&&u.indexOf(";TYPE=")!==-1){r=u.substring(5,u.indexOf(";TYPE="));z=u.substr(u.indexOf(";TYPE=")+6);if(z==="error"){x="icon-exclamation-triangle"}else{if(z==="warning"){x="icon-exclamation-circle"}else{x=""}}if(x){if(j.indexOf(r)===-1){p.append('<i class="icon '+x+'"></i> '+r+"<br/>");j.push(r)}r='<i class="icon '+x+'"></i> '+r}k.html(r);if(z==="error"&&!h.is(":visible")){c.click()}}else{if(u.indexOf("LINE=")===0){k.html(u.substr(5))}else{console.log("Unknown parameter: "+u)}}}}}}};h.on("load",function(){clearInterval(e);i();l.css("width","100%");o.html("DONE")});l.css("width","0%");o.html("Loading...");f.show();e=setInterval(i,250)})}})(window.Core,window.jQuery);